---
import { getCollection } from "astro:content";
import Container from "@components/Container.astro";
import PageLayout from "@layouts/PageLayout.astro";
import ArrowCard from "@components/ArrowCard.astro";
import Link from "@components/Link.astro";
import { dateRange } from "@lib/utils";
import { SITE, HOME, SOCIALS } from "@consts";

const blog = (await getCollection("blog"))
    .filter((post) => !post.data.draft)
    .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
    .slice(0, SITE.NUM_POSTS_ON_HOMEPAGE);

const allwork = (await getCollection("work"))
    .sort(
        (a, b) =>
            new Date(b.data.dateStart).valueOf() -
            new Date(a.data.dateStart).valueOf(),
    )
    .slice(0, SITE.NUM_WORKS_ON_HOMEPAGE);

const work = await Promise.all(
    allwork.map(async (item) => {
        const { Content } = await item.render();
        return { ...item, Content };
    }),
);
---

<PageLayout title={HOME.TITLE} description={HOME.DESCRIPTION}>
    <Container>
        <h4 class="animate font-semibold text-black dark:text-white">
            About me: <span class="text-xl"></span>
        </h4>
        <div>
            <section>
                <article class="space-y-12">
                    <p class="animate">
                        Hi, I’m Krzysztof Wujs, a privacy and open-source
                        software advocate with over a decade of experience in
                        dynamic B2B2C sectors like e-commerce, esports, banking,
                        AI, and blockchain. I focus on launching advanced
                        products that meet user needs and deliver efficiently.
                        As a Regen, I’m deeply invested in blockchain technology
                        and decentralized systems, driving the future of
                        internet.
                    </p>
                    <p class="animate">
                        My expertise lies in blockchain and web3 technologies,
                        particularly in decentralized systems, zero-knowledge
                        proofs, self-sovereign identity, and data privacy. I
                        have a solid history of delivering top-notch products
                        and leading successful teams, effectively bridging the
                        gap between technical and non-technical stakeholders to
                        ensure smooth collaboration.
                    </p>
                    <p class="animate">
                        I’m passionate about human-computer interaction and
                        committed to seamlessly integrating technology into our
                        daily lives. As a technology-agnostic professional, I
                        choose the best tools for each project. I focus on rapid
                        prototyping and agile development to ensure products not
                        just meet but exceed user expectations.
                    </p>
                </article>
            </section>
        </div>
        <section class="animate space-y-6">
            <div class="flex flex-wrap gap-y-2 items-center justify-between">
                <h5 class="font-semibold text-black dark:text-white">
                    Latest posts
                </h5>
                <Link href="/blog"> See all posts </Link>
            </div>
            <ul class="flex flex-col gap-1.5">
                {
                    blog.map((post) => (
                        <li>
                            <ArrowCard entry={post} />
                        </li>
                    ))
                }
            </ul>
        </section>

        <section class="animate space-y-4">
            <h5 class="font-semibold text-black dark:text-white">
                Let's Connect
            </h5>
            <article>
                <p>
                    If you’d like to get in touch or simply say hello, feel free
                    to connect with me on social media or send me an email.
                </p>
            </article>
            <ul class="flex flex-wrap gap-2">
                {
                    SOCIALS.map((SOCIAL) => (
                        <li class="flex gap-x-2 text-nowrap">
                            <Link
                                href={SOCIAL.HREF}
                                external
                                aria-label={`${SITE.NAME} on ${SOCIAL.NAME}`}
                            >
                                {SOCIAL.NAME}
                            </Link>
                            {"/"}
                        </li>
                    ))
                }
                <li class="line-clamp-1">
                    <Link
                        href={`mailto:${SITE.EMAIL}`}
                        aria-label={`Email ${SITE.NAME}`}
                    >
                        {SITE.EMAIL}
                    </Link>
                </li>
            </ul>
        </section>
    </Container>
</PageLayout>
